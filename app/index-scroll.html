<!doctype html>
    <head>
        <meta charset="utf-8">
        <title>touchanimation</title>
        <meta name="viewport" content="width=device-width">
        <!-- build:css(.tmp) styles/main.css -->
        <link rel="stylesheet" href="styles/main.css">
        <!-- endbuild -->
    </head>
    <body style="height: 400px">
        <div style="height: 200px; margin-top: 20px; border: 1px solid black; overflow: hidden">
        <div class="anim" style="height:600px;position:relative">
            <div style="position:absolute;top:0;background-color:grey;height:40px;width:100%">
                <div class="top-progress" style="position:absolute;bottom:0">Pull to refresh</div>
            </div>
            <div style="position:absolute;top:40px">
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
            </div>
            <div style="position:absolute;bottom:0;background-color:grey;height:40px;width:100%">
                Pull to refresh
            </div>
        </div>
        </div>

        <!--
        <p>
        Performance comparison: Native slider
        <input type="range" min="0" max="100" style="width:200px">
        </p>
        -->

        <!-- build:js scripts/vendor.js -->
        <!-- bower:js -->
        <script src="scripts/web-animations.js"></script>
        <!-- endbower -->
        <!-- endbuild -->

        <!-- build:js scripts/touch-animation.js -->
        <script src="scripts/utils.js"></script>
        <script src="scripts/gesture.js"></script>
        <script src="scripts/scroll-animation.js"></script>
        <!-- endbuild -->

        <script>

            var elem = document.querySelector('.anim'),
                topProgress = document.querySelector('.top-progress');

            var topAnimation1 = new Animation(elem, [
                {offset: 0, transform: 'translateZ(0) translateY(0)'},
                {offset: 1, transform: 'translateZ(0) translateY(-40px)'}
            ], 0.11);
            var topAnimation2 = new Animation(topProgress, [
                {offset: 0, transform: 'translateZ(0) translateX(0px)', color: 'green'},
                {offset: 1, transform: 'translateZ(0) translateX(400px)', color: 'red'}
            ], {
                duration: 0.11
            });
            var topAnimation = new ParGroup([topAnimation1, topAnimation2]);
            var contentAnimation = new Animation(elem, [
                {offset: 0, transform: 'translateZ(0) translateY(-40px)'},
                {offset: 1, transform: 'translateZ(0) translateY(-360px)'}
            ], 1);
            var bottomAnimation = new Animation(elem, [
                {offset: 0, transform: 'translateZ(0) translateY(-360px)'},
                {offset: 1, transform: 'translateZ(0) translateY(-400px)'}
            ], 0.11);

            var group = new SeqGroup([topAnimation, contentAnimation, bottomAnimation]);

            new ScrollAnimation({
                animation: group,
                animationPixels: 400,
                gesture: new gesture.SlideYGesture(document.body, -1),
                // offset in pixels!
                gestureEaseOut: {offset: 40, factor: 5}
            });

        </script>
</body>
</html>
